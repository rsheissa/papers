\documentclass[twocolumn]{article}
%\documentclass{ecctd01}
%\usepackage{cas_conf}
%\documentclass[a4paper]{ecctd01}

\usepackage[dvips]{epsfig}
\usepackage{epsfig}
\usepackage{psfrag}
\usepackage{pifont}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{rotate}
\usepackage{rotating}
\usepackage{/usr/share/texmf/tex/latex/abstract/abstract}

\bibliographystyle{/home/roberto/papers/ieeebib}

\input{/home/roberto/papers/macros/lin_alg.tex}
\input{/home/roberto/papers/macros/math_aux.tex}
\input{/home/roberto/papers/macros/jac_mtrx.tex}
\input{/home/roberto/papers/macros/cset_aux.tex}

\newtheorem{Theod}{{\bf Definition}}
\newtheorem{Theos}{{\bf Statement}}
\newtheorem{Theor}{{\bf Theorem}}
\newtheorem{Theoc}{{\bf Corallary}}

%\setlength{\oddsidemargin}{0mm}
%\setlength{\evensidemargin}{0mm}
%\setlength{\topmargin}{0mm}
%\setlength{\textwidth}{16.5cm}
%\setlength{\columnsep}{5mm}
%\setlength{\textheight}{21cm}
%\pagestyle{headings} %%Encabezados

\title{CAD Tool for Amplifier Design}


%\author{
%Arturo Sarmiento-Reyes\footnote{Delft University of Technology, ITS, Electronics Research Lab, Mekelweg 4, 2628CD Delft, The Netherlands. }, H\'ector V\'azquez-Leal\footnote{National Institute of Astrophysics Optics and Electronics, Electronics Department, CAD Group, P.O. Box 51, 72000 Puebla, Pue., Mexico. Tel: +52-22-470517, Fax: +52-22-470517.E-mail:\texttt{luish@inaoep.mx}. This work has been partially supported by the CONACyT project 28504-A.} \ and  Luis Hern\'andez-Mart\'{\i}nez\footnotemark[2]
%}

\author{Arturo Sarmiento-Reyes\footnote{National Institute for Astrophysics, Optics and Electronics
Electronics Department, CAD Group, P.O. Box 51, 72000, Puebla, Pue., Mexico, Email: {\tt jarocho@inaoep.mx}},
Roberto Casta\~neda Sheissa\footnotemark[1]}

\begin{document}
\maketitle


\begin{onecolabstract}
This work presents a CAD application based on the structured design, focused
on the design of amplifiers. As it will be seen, is possible to transform the
theory to some easy steps to follow in order to achieve our goal, that is,
a full functional amplifier. This amplifier is automatically created to
fulfill the designer's conditions.
\end{onecolabstract}


\section{Introduction}

The development of a tool for amplifier design using characteristics defined by
the designer such as noise level, amplifier type, signal source, load type, bandwidth,
and distortion level can be accomplished by means of the {\it structured design} \cite{verhoeven}.
One of the best features for this tools is that the user can add new modules as needed and 
the program updated without the need of being in touch with the software designer, the modular
design allow to upgrade for newer versions automatically. This can only be achieved using the 
basics for the object oriented
software design \cite{c++1}.

\section{Key Aspects}

The amplifier design requires some independent steps to analize and implement each and every
one of the stages which it is made of. The {\it orthogonality principle} is applied under the
assumption that the steps of design can be achieved independently.
Another principle applied is the concept of {\it nullor} \ref{nullor}. This ideal element is 
a combination of a {\it nullator} for the input and a {\it norator} for the output. This element 
has the characteristic of being the ideal active circuit \cite{verhoeven}. The adequate selection
of the required topology lies on the data supplied by the user. The data is:

\begin{dinglist}{43}
\item Load type.
\item Source type.
\item Amount of amplification required.
\end{dinglist}

\begin{figure}[hbtp]
\centerline{
\epsfxsize=40mm
\epsffile{/home/roberto/papers/figuras/fig_nullor.eps}}
\caption{The nullor.}
\label{nullor}
\end{figure} 

\subsection{Structured Design}

The method of {\it electronic structured design} is ideal to find a quick solution for
the design issue. Unfortunately this depends on a number of considerations and a small
amount of rules. Therefore, the practical application of strutured design never should
end on a total rejection of results based merely on the designer's {\it experience} or
results generated by any other design strategy, this may provoque a major withdraw on 
teh evolution of the design theory.
The main goal for designer is to maximize the capacity to handle signals according to
the limitations of the media. However is necesary to deal with some tredeoffs to
accomplish a high performance device, for instance the power comsuption or noise level
are important matters to notice.
Three asumptions are made to assure that the strategy is efficient enough \cite{verhoeven}:
{\it orthogonality}, {\it simplicity} and {\it hierarchy}.

\subsection{Transfer of an Amplifier}

The rate of transfer for an amplifier is determinated by the feedback network \cite{nordholt}.
Such a network and the nullor implementation create a tight relationship between current and
voltage values at the input and output for the amplifier. Using the {\it Chain-matrix} the input
voltage and current of a two-port to the output voltage and current can be related:

\begin{displaymath}
\left(\begin{array}{l}
V_i\\
I_i
\end{array} \right)=
\left(\begin{array}{cc}
A&B\\
C&D
\end{array} \right)
\left(\begin{array}{l}
V_o\\
I_o
\end{array} \right)
\end{displaymath}

with 

\begin{displaymath}
\mathbf{A}=
\left(\frac{V_i}{V_o} \right)_{I_o=0}
\quad
\mathbf{B}=
\left(\frac{V_i}{I_o} \right)_{V_o=0}
\end{displaymath}
\begin{displaymath}
\mathbf{C}=
\left(\frac{I_i}{V_o} \right)_{I_o=0}
\quad
\mathbf{D}=
\left(\frac{I_i}{I_o} \right)_{V_o=0}
\end{displaymath}

\subsection{Topology}

The design tool considers, on a first approach, one loop topologies. This is
done to understand the method for such topologies and increase the complex
using this base. The four basic topologies are \cite{verhoeven} \cite{nordholt}
\cite{stoffels}:

\begin{figure}[hbtp]
\centerline{
\epsfxsize=75mm
\epsffile{/home/roberto/papers/figuras/nullor_grouped.eps}}
\caption{Four basic amplifier configurations with nullor.}
\label{volt_amp}
\end{figure} 

\section{Tool Structure}

The figure \ref{descad_1} shows the block structure for the tool. This is the
base which the development has been done. The goal is to obtain a basic structure
which be able to follow and program the basic, and important, blocks. Once proved
the efficiency of the basic parts the next step is to add the secondary blocks for
the process and some other functions without the need to re-design the tool. The
main idea behind this is to being able to develop a program based on modules
rather than only a main, and complex, program. This involves breaking down the parts
from a general to a particular point.

\begin{figure}[hbtp]
\centerline{
\epsfxsize=40mm
\epsffile{/home/roberto/papers/figuras/DESCAD_1.eps}}
\caption{DESCAD's basic structure.}
\label{descad_1}
\end{figure}

\subsection{User Interface}

This is how the program communicates with the user. The information shown by the
program is as concise and simple as posible. Since the program uses command line
interface is not wise to fill the screen with so much information, because it may
cause confusion instead of being simple.
Basically on the first screen shows the program's name, developer's name, area
and then the main menu and its options, figure \ref{ui}.

\begin{figure}[hbtp]
\centerline{
\epsfxsize=75mm
\epsffile{/home/roberto/papers/figuras/pantalla_1_AMPDES.eps}}
\caption{DESCAD's main screen.}
\label{ui}
\end{figure}

Other items for the user interface include:

\begin{dinglist}{43}
\item Selection on type of amplifier.\\ Four basic options are offered: voltage,
current, transadmitance and transconductance amplifiers.The power supply is automatically 
selected after the selection of type of amplifier.

\begin{table}[hbtp]
\vspace{5mm}
\centerline{
\begin{tabular}{||l||c||}
\hline \hline
Supply & Amplifier \\ \hline \hline
Voltage & Voltage and transadmitance \\ \hline
Current & Current and transimpedance \\ \hline \hline
\end{tabular}}
\end{table}

remain to be defined the impedance for the supply, it is taken as a resistor whose
value is defined by the user. This applies for both types of supplies. For the
output impedance, usually known as {\it load}, it will also be considered as a
resistor and its value given by the user.
\item Device selection. \\ In order to create a device with similar characteristics
as the {\it nullor} the designer has two choices for the devices to use. The two
options are {\it BJT} or {\it MOS}, this devices can are selected on the command
line menu.
\item Error messages. \\ On the eventuality that the user enters a value that can
not be allowed on an item, the program generates an error message. One must nottice 
that certain values lies in a certain range of values and if a value is supplied 
outside this range a warning is issued.
\item Other conditions. \\ The user must supply the specification related to distortion 
level, bandwidth and noise value. Nevertheless this do not imply that it can not be 
{\it default values} in case that any or all values are not introduced. It is possible 
to introduce quantities by using engineering notation, that is, by introducing numbers with 
the letter {\it e} as part of an exponential value.
\end{dinglist}

\section{Process Stages}

Once all the basic values are introduced and conditions established, the tool begins its 
internal process to design the desired amplifier using the steps in order of structured design.

\subsection{Noise Stage}

This is the first block to automate and generate according to the structured design \cite{verhoeven}.
The steps to achieve the automation for the four basic amplifier structures were developed at INAOE
and proven true by simulations. Eight steps are necesary for each structure. The first step for all is
to include the noise sources of every device included. This noise sources may be a voltage noise source
or a current noise source. These sources are added to the original topology.
For the implementation of {\it nullor} the noise models for {\it BJT} or {\it MOS} must be added to
the circuit. The methodology for this stage consist of take all noise sources out to the input of the
two port circuit. This can be done doing some transformations:

\begin{itemize}
\item {\bf Voltage source movement}\\ Allows the movement for the noise voltage sources through the
amplifier network. Such movement cannot brake {\bf KVL} anywhere inside the circuit.
\item {\bf Current source movement}\\ The principle is the same as the preceding point, now the law
that cannot be broken is {\bf KCL}. Both source movements let take all noise contributions out of
the circuit, leaving a noise free circuit.
\item {\bf Norton-Thevenin transformations}\\ This helps to transform a noisy current source to a noisy
voltage source or viceversa. Essentially this kind of transformation do not move sources inside the
circuit, this is done to make easier the two previous movements.
\item {\bf Two port transformations}\\ Here is a need the use of the {\it Chain-matrix} in order to move
the noise sources. This operation consist on the movement of the noise sources (voltage and/or current)
from the output to the input. The values of these sources will be affected by the values on the
{\it Chain-matrix}.
\end{itemize}

Once the noise sources are placed on the input the next step is to calculate the value for all noise
sources. This value allow to make the necesary adjustments to the values on some devices, the ones that
add noise to the amplifier. This will guarantee that the noise contibution affect the other stages.

\subsection{Distortion Stage}

Just like the noise stage is the first to be designed, the distortion stage is the last block. This do
not imply that distortion is not so imnportant as the other two stages. It happens that applying the
{\it principle of orthogonality} the ideal stage for being on the output is this one. Distortion
describes the deviation for the normal behaviour of the circuit \cite{verhoeven}.
Two kinds of distortion arises as the most important to take notice of:
\begin{itemize}
\item {\bf Weak distortion}\\ When the signal becomes so large that the higher order terms cannot be
neglected but it not cause a complete change on the signal behaviour in the amplifier that is what is
called {\it Weak distortion}. This can be reduced by an increase of the loop gain.
\item {\bf Clipping distortion}\\ When the signal becomes so great that the small signal cannot be
valid anymore such that the parameters for the small signal model depend so strong on the signal, this
is what is called {\it Clipping}. This happens when the signal has a large amplitude. Here the
considerations about bandwidth cannot be applied since this can be adjusted somewhere inside the
amplifier.
\end{itemize}

The gain for this stage must be as large as possible.

\subsection{Bandwidth Stage}

Design in order to obtain the best bandwidth behaviour for the amplifier requires a lot of work. This
makes necessary to do some simple measurements in order to know the capabities for the circuit on
some range of frequencies, this may help to do not waste much time on the design for this stage.
Using the product {\bf Loop-gain-poles} ({\it LP product}) is possible to do some very simple 
measurements to obtain the maximum bandwidth the circuit can handle. If the LP product is too low
(depends on the specified bandwidth) is {\it impossible} to achieve the desired bandwidth. This shows
that the product must be increased.

\section{Conclusions}

As has been shown, it has been possible to turn into algorithms the basics for the structured design on
electronics. Taking a further step this algorithms has been programmed in C++ under linux. The results
will be further provided. This tool has been tested using the H-SPICE simulator, providing readings
between a 5 percent of error to the original constraints by the user. What remains to be done is to 
improve the algorithms and polish the theory.


%%\bibliographystyle{IEEEbib}
%%\bibliographystyle{/home/luish/tex/bib/ieeebib}
\bibliography{/home/roberto/papers/bib/descad}
\end{document}
